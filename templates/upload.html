{% extends 'base.html' %}

{% block styles %}
  <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/isotope.css" />
{% endblock %}

{% block topscripts %}
{% endblock %}

{% block main %}
<div class="row">
  <div class="span9">
    <div id="fileupload">
      <div id="isocontainer" class="fileupload-content files">
        {% if pics|length == 0 %}
          <div class="instructions">
            <h2>Drag pictures here</h2>
            <h4>Or click "Add Pictures" on the right</h4>
          </div>
        {% else %}
          {% for pic in pics %}
            {# These are hidden and unhidden after isotope has run #}
            {% if pic.browser_group_id %}
              <div class="pic_container" style="display:none;" group_id="{{ pic.browser_group_id }}" uuid="{{ pic.uuid }}">
            {% else %}
              <div class="pic_container" style="display:none;" group_id="{{ ungroupedId }}" uuid="{{ pic.uuid }}">
            {% endif %}
              <div class="contents">
                <div class="preview">
                  <img src="{{pic.get_thumb_url}}">
                </div>
                <img class="del_pic" src="/static/images/redx.png"/>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
  <div class="span2 fileupload-buttonbar">
    <div style="position:fixed; width:130px;">

      <form action="{% url upload_handler %}" method="POST" enctype="multipart/form-data"> {% csrf_token %}
        <div class="btn btn-primary btn-large fileupload-addbutton">
          Add Pics
          <input type="file" name="files[]" multiple >
        </div>
        <div id="group" class="btn btn-primary btn-large" href="#" style="display : block; margin-top: 12px;">Group</div>
        <a id="next" href="/markup/1" class="btn btn-primary btn-large disabled" href="#" style="display: block; margin-top: 120px;">Next</a>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
    {# Isotope stuff: #}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="{{ STATIC_URL }}bootstrap/js/bootstrap.min.js"></script>
    {# <script src="{{ STATIC_URL }}js/jquery.1.7.2.min.js"></script> #}
    <script src="{{ STATIC_URL }}js/jquery.isotope.min.js"></script>
    {# <script src="{{ STATIC_URL}}js/jquery.isotope.js"></script> #}
    <script src="{{ STATIC_URL }}js/isotope-app.js"></script>

    {# Upload stuff: #}
    <script id="template-upload" type="text/x-jquery-tmpl">
        {% include 'template-upload.x-jquery-tmpl' %}
    </script>
    <script id="template-download" type="text/x-jquery-tmpl">
        {% include 'template-download.x-jquery-tmpl' %}
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.iframe-transport.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.fileupload.js"></script>
    <script src="{{ STATIC_URL }}js/jquery.fileupload-ui.js"></script>
    <script src="{{ STATIC_URL }}js/upload-application.js"></script>
    {# IE 6/7 don't have JSON.stringify, so add Douglas Crockford's: #}
    <script src="{{ STATIC_URL }}js/json2.js"></script>
{% comment %}
{% endcomment %}
{% endblock %}

